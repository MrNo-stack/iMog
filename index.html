<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iMog: Financial Face-Off</title>
    <!-- Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        :root {
            --mogger-neon: #ff00ff;
            --soyboy-neon: #00ffff;
            --arcade-yellow: #ffff00;
            --arcade-red: #ff0000;
        }
        body {
            background: radial-gradient(circle at center, #1a0b2e 0%, #0d0221 100%);
            color: #fff;
            font-family: 'Press Start 2P', cursive;
            margin: 0;
            overflow-x: hidden;
        }
        .crt-overlay {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                        linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 4px, 3px 100%;
            pointer-events: none;
            z-index: 100;
        }
        .panel {
            background: #111;
            border: 6px solid #444;
            box-shadow: 10px 10px 0px #000;
            position: relative;
        }
        .mogger-panel { border-color: var(--mogger-neon); box-shadow: 10px 10px 0px #4a004a; }
        .soyboy-panel { border-color: var(--soyboy-neon); box-shadow: 10px 10px 0px #004a4a; }
        
        .character-box {
            height: 250px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            background: linear-gradient(180deg, #1a0b2e 0%, #2d1b4e 70%, #4b2d7a 100%);
            border-bottom: 6px solid #fff;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 0 50px rgba(0,0,0,0.8);
        }

        .floor-grid {
            position: absolute;
            bottom: 0;
            width: 200%;
            height: 40px;
            background-image: linear-gradient(0deg, transparent 24%, rgba(255, 255, 255, .05) 25%, rgba(255, 255, 255, .05) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, .05) 75%, rgba(255, 255, 255, .05) 76%, transparent 77%, transparent), linear-gradient(90deg, transparent 24%, rgba(255, 255, 255, .05) 25%, rgba(255, 255, 255, .05) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, .05) 75%, rgba(255, 255, 255, .05) 76%, transparent 77%, transparent);
            background-size: 20px 20px;
            transform: perspective(40px) rotateX(45deg);
            animation: moveGrid 2s linear infinite;
        }

        @keyframes moveGrid {
            from { transform: perspective(40px) rotateX(45deg) translateY(0); }
            to { transform: perspective(40px) rotateX(45deg) translateY(20px); }
        }

        input, select {
            background: #000;
            border: 3px solid #555;
            color: #0f0;
            font-family: 'Press Start 2P', cursive;
            font-size: 12px;
            padding: 10px;
            width: 100%;
            outline: none;
            transition: all 0.2s;
        }
        input:focus { border-color: var(--arcade-yellow); background: #111; }
        input:disabled { color: #444; border-color: #222; }

        .vs-logo {
            font-size: 50px;
            color: #ff0000;
            text-shadow: 4px 4px 0 #ffff00, 8px 8px 0 #000;
            transform: rotate(-10deg);
            z-index: 50;
        }
        
        /* High Detail Animations */
        .win-pose { animation: winJump 0.5s infinite alternate ease-in-out; }
        .ko-pose { 
            transform: rotate(90deg) translateY(60px) scale(0.9); 
            opacity: 1.0; 
            filter: none;
        }
        
        @keyframes winJump { 
            0% { transform: translateY(0) scale(1.1); filter: brightness(1); } 
            100% { transform: translateY(-30px) scale(1); filter: brightness(1.5); } 
        }

        .aura-mogger {
            position: absolute;
            width: 150px; height: 150px;
            background: radial-gradient(circle, rgba(255,0,255,0.2) 0%, transparent 70%);
            animation: pulseAura 1s infinite alternate;
        }
        .aura-soyboy {
            position: absolute;
            width: 150px; height: 150px;
            background: radial-gradient(circle, rgba(0,255,255,0.2) 0%, transparent 70%);
            animation: pulseAura 1.5s infinite alternate;
        }
        @keyframes pulseAura {
            from { transform: scale(0.8); opacity: 0.3; }
            to { transform: scale(1.3); opacity: 0.7; }
        }

        .blood-pool {
            position: absolute;
            bottom: 5px;
            width: 80px;
            height: 20px;
            background: #800;
            border-radius: 50%;
            filter: blur(2px);
            opacity: 0.8;
            z-index: 5;
            animation: expandBlood 2s forwards;
        }

        @keyframes expandBlood {
            from { transform: scale(0.1); opacity: 0; }
            to { transform: scale(1); opacity: 0.8; }
        }
    </style>
</head>
<body class="p-4 md:p-10">
    <div class="crt-overlay"></div>
    
    <div class="max-w-7xl mx-auto relative z-10">
        <!-- HUD -->
        <div class="flex justify-between items-center bg-black border-[6px] border-[#555] p-4 mb-10 shadow-[inset_0_0_20px_#000]">
            <div class="w-2/5">
                <div class="flex justify-between mb-1">
                    <span class="text-pink-500 text-[10px]">P1: CHAD MOGGER</span>
                    <span id="mogger-hp-text" class="text-white text-[8px]">100%</span>
                </div>
                <div class="h-6 w-full bg-[#222] border-4 border-white">
                    <div id="mogger-health" class="h-full bg-gradient-to-r from-pink-600 to-pink-400 transition-all duration-700 shadow-[0_0_10px_#ff00ff]" style="width: 100%;"></div>
                </div>
            </div>
            <div class="vs-logo">VS</div>
            <div class="w-2/5 text-right">
                <div class="flex justify-between mb-1">
                    <span id="soyboy-hp-text" class="text-white text-[8px]">100%</span>
                    <span class="text-cyan-400 text-[10px]">P2: BETA SOYBOY</span>
                </div>
                <div class="h-6 w-full bg-[#222] border-4 border-white">
                    <div id="soyboy-health" class="h-full bg-gradient-to-l from-cyan-600 to-cyan-400 transition-all duration-700 shadow-[0_0_10px_#00ffff] float-right" style="width: 100%;"></div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
            <!-- MOGGER PANEL -->
            <div class="panel mogger-panel p-6">
                <div class="character-box mb-6" id="mogger-box">
                    <div class="floor-grid"></div>
                </div>
                <h2 class="text-center text-pink-500 mb-6 text-xs tracking-widest">CHAD MOGGER LOADOUT</h2>
                <div class="grid grid-cols-2 gap-x-4 gap-y-6 text-[8px]">
                    <div class="col-span-2">
                        <label class="block mb-2">PROPERTY VALUE</label>
                        <input type="number" id="propCost" value="450000">
                    </div>
                    <div>
                        <label class="block mb-2">WARCHEST (LUMP)</label>
                        <input type="number" id="initialInvestMogger" value="90000" disabled>
                    </div>
                    <div>
                        <label class="block mb-2">LOAN RATE %</label>
                        <input type="number" id="interestRate" step="0.1" value="6.8">
                    </div>
                    <div>
                        <label class="block mb-2">LOAN TERM (YRS)</label>
                        <input type="number" id="loanTermMogger" value="30">
                    </div>
                    <div>
                        <label class="block mb-2">WARCHEST GROWTH %</label>
                        <input type="number" id="investReturn" value="9">
                    </div>
                    <div>
                        <label class="block mb-2">PROPERTY GROWTH RATE %</label>
                        <input type="number" id="growthRateMogger" step="0.1" value="3.5">
                    </div>
                    <div>
                        <label class="block mb-2">BATTLE DURATION (YRS)</label>
                        <input type="number" id="timeHorizon" value="20">
                    </div>
                </div>
            </div>

            <!-- SOYBOY PANEL -->
            <div class="panel soyboy-panel p-6">
                <div class="character-box mb-6" id="soyboy-box">
                    <div class="floor-grid"></div>
                </div>
                <h2 class="text-center text-cyan-400 mb-6 text-xs tracking-widest">BETA SOYBOY LOADOUT</h2>
                <div class="grid grid-cols-2 gap-x-4 gap-y-6 text-[8px]">
                    <div class="col-span-2">
                        <label class="block mb-2">PROPERTY VALUE</label>
                        <input type="number" id="propCostSoy" value="450000">
                    </div>
                    <div>
                        <label class="block mb-2">DOWN PAYMENT</label>
                        <input type="number" id="downPayment" value="90000">
                    </div>
                    <div>
                        <label class="block mb-2">MONTHLY PAYMENT</label>
                        <input type="number" id="monthlyInvestSoyboy" value="0" disabled>
                    </div>
                    <div>
                        <label class="block mb-2">LOAN TERM (YRS)</label>
                        <input type="number" id="loanTermSoyboy" value="30">
                    </div>
                    <div>
                        <label class="block mb-2">PROPERTY GROWTH RATE %</label>
                        <input type="number" id="growthRateSoyboy" step="0.1" value="3.5">
                    </div>
                    
                    <div class="col-span-2 bg-black border-2 border-green-500 p-3 text-center mt-2 shadow-[0_0_10px_rgba(0,255,0,0.2)]">
                        <div class="text-green-400 text-[7px] mb-2 uppercase">Monthly Payment</div>
                        <div id="monthly-diff" class="text-white text-xl font-bold">$0</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- WINNER BANNER -->
        <div class="bg-black border-[8px] border-yellow-400 p-8 text-center mt-10 shadow-[0_0_30px_rgba(255,255,0,0.4)] relative">
            <div class="absolute -top-6 left-1/2 -translate-x-1/2 bg-yellow-400 text-black px-4 py-1 text-[10px]">FINISH HIM!</div>
            <div id="winner-text" class="text-4xl text-yellow-400 mb-6 [text-shadow:6px_6px_#f00] tracking-tighter italic">CALCULATING...</div>
            <div class="grid grid-cols-2 gap-8 text-[10px]">
                <div class="border-r border-gray-800">
                    <div class="text-pink-500 mb-2">MOGGER TOTAL EQUITY</div>
                    <div id="final-mogger" class="text-2xl text-white">$0</div>
                </div>
                <div>
                    <div class="text-cyan-400 mb-2">SOYBOY TOTAL EQUITY</div>
                    <div id="final-soyboy" class="text-2xl text-white">$0</div>
                </div>
            </div>
        </div>

        <!-- CHART -->
        <div class="mt-10 bg-black border-8 border-[#333] p-5 shadow-2xl">
            <canvas id="mainChart"></canvas>
        </div>
    </div>

    <script src="calculator.js"></script>
    <script src="view_controller.js"></script>
    <script>
        document.querySelectorAll('input').forEach(input => input.addEventListener('input', update));
        window.addEventListener('load', update);
    </script>
</body>
</html>
